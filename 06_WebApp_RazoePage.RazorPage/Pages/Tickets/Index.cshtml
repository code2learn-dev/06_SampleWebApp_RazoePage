@page
@model _06_WebApp_RazoePage.RazorPage.Pages.Tickets.IndexModel
@{
	ViewBag.Title = "لیست بلیت ها";
	ViewBag.CssTitle = "info";
	LinkViewModel linkViewModel = new LinkViewModel()
	{
		Caption = "ثبت بلیت جدید",
		PageName = "Add"
	};
}
<table class="table table-striped table-bordered table-responsive">
	<thead>
		<tr>
			<th>ردیف</th>
			<th>نام مشتری</th> 
			<th>کد ملی</th>
			<th>عنوان فیلم</th> 
			<th>تاریخ ثبت</th>
			<th>تاریخ رزرو</th>
			<th>عملیات</th>
		</tr>
	</thead>
	<tbody>
		@if (Model.EntityViewModelList is not null &&
						   Model.EntityViewModelList.Any())
		{
			foreach (var ticket in Model.EntityViewModelList.Select(
				(item, index) => new { item, index }))
			{
				<tr>
					<td>@(ticket.index + 1)</td>
					<td>@($"{ticket.item.FirstName} {ticket.item.LastName}")</td>
					<td>@ticket.item.NationalCode</td>
					<td>@ticket.item.Title</td>
					<td>@ticket.item.RegisterDate</td>
					<td>@ticket.item.ResevationDate</td>
					<td>
						<a class="btn btn-success btn-sm" asp-route-id="@ticket.item.TicketId" asp-page="Edit">ویرایش</a>
						<a class="btn btn-danger btn-sm" asp-route-id="@ticket.item.TicketId" asp-page="Delete">حذف</a>
					</td>
				</tr>
			}
		}
		else
		{
			<tr>
				<td colspan="7">
					<p class="alert alert-warning text-center">بلیتی یافت نشد</p>
				</td>
			</tr>
		}
	</tbody>
</table>
<partial name="LinkView" model="@linkViewModel" />
